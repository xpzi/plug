<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="keywords" content="映客,映客直播,映客app,映客官网,直播,明星直播,映客下载,映客直播下载,映客app下载,视频交友,全民直播,美女直播,高颜值直播" />
    <meta name="description" content="映客直播,实时、高清、快捷、流畅的视频直播平台,中国全新的视频社交媒体,明星大咖、网络红人、时尚娱乐、高颜值、视频交友等尽在映客直播app" />
    <title>入驻管理</title>
    <link type="image/x-icon" rel="shortcut icon" href="https://act.inke.cn/common/favicon.ico">
    <script>var rem = { baseRem: 20, baseWidth: 375, rootEle: document.getElementsByTagName("html")[0], initHandle: function() { this.setRemHandle(); this.resizeHandle(); }, setRemHandle: function() { var clientWidth = document.documentElement.clientWidth || document.body.clientWidth; this.rootEle.style.fontSize = clientWidth * this.baseRem / this.baseWidth + "px"; }, resizeHandle: function() { var that = this; window.addEventListener("resize", function() { setTimeout(function() { that.setRemHandle(); }, 300); }); } }; rem.initHandle();</script>
    <link rel="stylesheet" href="css/base.css">
    <style>
        .header{position:relative;margin-bottom:.4rem;width:18.75rem;height:18.75rem;}
        .footer{padding-bottom:2rem;width:18.75rem;}
        .home{position:relative;z-index:1;padding:14.25rem 0 0 .75rem;color:#fff;line-height:1.25rem;}
        .home span{display:inline-block;margin-right:.4rem;vertical-align:middle;font-size:1.05rem;font-weight:bold;}
        .home i{display:inline-block;vertical-align:middle;}
        .sex{margin-right:.4rem;width:.75rem;height:.75rem;}
        .sex-0{background:url(//img2.inke.cn/MTQ5MzcwOTY1ODYxNSM2OTgjanBn.jpg) no-repeat;background-size:100% 100%;}
        .sex-1{background:url(//img2.inke.cn/MTQ5MzcwOTY3ODE2MiM3NzMjanBn.jpg) no-repeat;background-size:100% 100%;}
        .level{width:1.65rem;height:.75rem;}
        .data{position:relative;z-index:1;padding:.8rem 0 0 .75rem;color:#fff;line-height:.8rem;}
        .data span{display:inline-block;vertical-align:middle;}
        .data span:nth-of-type(1){margin-right:.4rem;font-size:.65rem;}
        .data span:nth-of-type(2){width:.65rem;height:.65rem;background:url(//img2.inke.cn/MTQ5MzcwOTY4OTYyNiMzMzMjanBn.jpg) no-repeat;background-size:100% 100%;}
        .shade{position:absolute;top:0;left:0;z-index:0;width:100%;height:100%;background:linear-gradient(bottom,rgba(0,0,0,.6) 0,rgba(0,0,0,0) 32%);background:-webkit-linear-gradient(bottom,rgba(0,0,0,.6) 0,rgba(0,0,0,0) 32%);background:-moz-linear-gradient(bottom,rgba(0,0,0,.6) 0,rgba(0,0,0,0) 32%);}
        .query{ font-size: 0.5rem; color: #aaa;display: block; line-height: 0.6rem;}
        .block-q{ height: 3.0rem; line-height: 1.85rem;}
    </style>
</head>
<body>
    <main id="wrapper">
        <header class="header">
            <div class="shade"></div>
            <div class="home">
                <span class="nick"></span><i class="sex"></i><i class="level"></i>
            </div>
            <div class="data">
                <span class="myself myself-t">编辑资料</span><span class="myself"></span>
            </div>
        </header>
        <footer class="footer">
            <a class="task block block-a c1" data-code="task.html">我的任务</a>
            <a class="income block block-a c1" data-code="setAlipay_2.html">我的收入</a>
            <a class="help block block-a c1" data-code="help.html">帮助反馈</a>
            <!--<a class="service block block-a c1" data-code="service2.html">我开放的服务</a>-->
            <a class="block block-q c1">
                <p class="fl">参考邀约费<span class="query">（注：若存疑，请提交自报邀约费供平台核定）</span></p>
                <p class="default-price fr c3"></p>
            </a>
            <a class="money block block-a c1" data-code="data2.html">
                <p class="fl">自报邀约费</p>
                <p class="price fr c3">元/场</p>
            </a>
            <a class="counselor block block-a c1" data-code="counselor2.html">我的经纪顾问</a>
        </footer>
    </main>

    <!--loading-->
    <section id="loading"><p><span></span></p></section>
    <!--loading结束-->
</body>
<div style="display:none;"><script src="https://s95.cnzz.com/z_stat.php?id=1261919673&web_id=1261919673" language="JavaScript"></script></div>
    <script src="https://act.inke.cn/common/zepto.min.js"></script>
    <script src="js/common-s.js"></script>
    <script src="js/base.js"></script>
    <script>
        var Page = {
            header: $(".header"),
            nick: $(".nick"),
            sex: $(".sex"),
            level: $(".level"),
            myself: $(".myself"),
            myself_t: $(".myself-t"),
            task: $(".task"),
            income: $('.income'),
            help: $(".help"),
            service: $(".service"),
            default_price: $(".default-price"),
            money: $(".money"),
            price: $(".price"),
            footer_a: $(".footer .block-a"),
            flg1: 0,
            flg2: 0,
            init: function () {
                var that = this;
                if (Base.uid && Base.sid) {
                    that.bindEvent();
                    that.initInfo();
                    window.setTimeout(function () {
                        Base.body.scrollTop(1000);
                    }, 300);
                } else {

                }
            },
            bindEvent: function () {
                var that = this;
                Base.clickHref(that.myself, "data2.html");
                for (var i = 0; i < that.footer_a.length; i++) {
                    that.footer_a.eq(i).attr("href", Base.href(that.footer_a.eq(i).attr("data-code")));
                }
            },

            // 查询映天下平台主播信息
            initInfo: function () {
                var that = this,
                    _time = new Date() * 1;
                Base.loading.show();

                function loading() {
                    if (that.flg1 && that.flg2) {
                        Base.loading.hide();
                    }
                }

                // 主播信息
                Common.ajax({
                    host: Base.apiHost(),
                    url: "/app/select_user_info",
                    data: {
                        v: "201706"
                    },
                    success: function (res) {
                        that.flg1 = 1;
                        loading();
                        var data = res.data,
                            dm_error = res.dm_error,
                            error_msg = res.error_msg;
                        _czc && _czc.push(["_trackEvent", "economy2_index2", "ajax", "initData_" + dm_error, (new Date() * 1 - _time)]);
                        if (dm_error === 0) {
                            if (!data.default_price) {
                                that.default_price.html("平台核定中...");
                            } else {
                                that.default_price.html(data.default_price / 100 + " 元/场");
                            }
                            that.price.html(data.price / 100 + " 元/场");
                            if (data.status === 0 || data.status === 3) {
                                that.myself_t.html("编辑资料（审核中）");
                            }
                        } else if (dm_error === 1099010012) {
                            Base.alertShow("登录已过期，请在<br/>设置中退出并重新登录");
                        } else if (dm_error === 1099010015) {
                            Base.alertShow(error_msg);
                        } else {
                            Base.alertShow(error_msg);
                        }
                    },
                    error: function () {
                        _czc && _czc.push(["_trackEvent", "economy2_index2", "ajax", "initData_error", (new Date() * 1 - _time)]);
                        Base.loading.hide();
                        Base.alertShow("网络错误，请退出重试");
                    }
                });

                // 个人信息
                Common.ajax({
                    host:Base.apiHost(),
                    url: "/app/user_info",
                    success: function (res) {
                        that.flg2 = 1;
                        loading();
                        var data = res.data,
                            dm_error = res.dm_error,
                            error_msg = res.error_msg;
                        _czc && _czc.push(["_trackEvent", "economy2_index2", "ajax", "initInfo_" + dm_error, (new Date() * 1 - _time)]);
                        if (dm_error === 0) {
                            that.header.css({
                                background: "url(" + data.user_pic + ") no-repeat",
                                backgroundSize: "100% 100%"
                            });

                            that.nick.html(data.user_nick);
                            that.sex.addClass("sex-" + data.sex);
                            that.level.css({
                                background: "url(\"http://img.meelive.cn/" + that.initLevel()[data.level + "_1"] + "\") no-repeat",
                                backgroundSize: "100% 100%"
                            });
                        } else if (dm_error === 1099010012) {
                            Base.alertShow("登录已过期，请在<br/>设置中退出并重新登录");
                        } else {
                            Base.alertShow(error_msg);
                        }
                    },
                    error: function () {
                        _czc && _czc.push(["_trackEvent", "economy2_index2", "ajax", "initInfo_error", (new Date() * 1 - _time)]);
                        Base.loading.hide();
                        Base.alertShow("网络错误，请退出重试");
                    }
                });


                // 检测有没有正确的填写支付宝
                Common.ajax({
                    url: '/app/insert_media_alipay',
                    data: {v:'201708'},
                    success:function (data) {
                        // 如果支付宝填写了就转化成正确的地址
                        if( data.dm_error == 0 && data.data){
                            that.income.attr('href', that.income.attr('href').replace('setAlipay_2.html', 'income.html'));
                        }
                    },
                    error: function(){}
                });

            },
            // 获取等级图标
            initLevel: function () {
                var _data = [],
                    _temp = {};

                function getLevel() {
                    Base.loading.show();
                    Common.ajax({
                        url: "https://webapi.busi.inke.cn/web/Live_resource_rank",
                        success: function (res) {
                            Base.loading.hide();
                            if (res.error_code === 0) {
                                _data = res.data;
                                for (var i = 0; i < _data.length; i++) {
                                    _temp[_data[i].level + "_1"] = _data[i].blk; // 男
                                    _temp[_data[i].level + "_0"] = _data[i].glk; // 女
                                }
                                LocalData.set("_economy2_level", JSON.stringify(_temp));
                            } else {
                                // console.log(res.message || "获取等级图标失败，请重试！");
                            }
                        },
                        error: function () {
                            Base.loading.hide();
                            // console.log("获取等级图标失败，请重试！");
                        }
                    });
                }

                if (!LocalData.get("_economy2_level")) {
                    getLevel();
                    return _temp;
                } else {
                    _temp = JSON.parse(LocalData.get("_economy2_level"));
                    return _temp;
                }
            },
            log: function (click_id, callback) {  //  埋点
                Common.log({
                    busi_code: "economy2",
                    page_code: "index2",
                    other: {
                        click_id: click_id
                    },
                    callback: callback
                });
            }
        };

        $(function () {
            Page.init();
        });

    </script>
</html>