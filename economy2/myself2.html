<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="keywords" content="映客,映客直播,映客app,映客官网,直播,明星直播,映客下载,映客直播下载,映客app下载,视频交友,全民直播,美女直播,高颜值直播" />
    <meta name="description" content="映客直播,实时、高清、快捷、流畅的视频直播平台,中国全新的视频社交媒体,明星大咖、网络红人、时尚娱乐、高颜值、视频交友等尽在映客直播app" />
    <title>个人信息</title>
    <link type="image/x-icon" rel="shortcut icon" href="https://act.inke.cn/common/favicon.ico">
    <script>var rem = { baseRem: 20, baseWidth: 375, rootEle: document.getElementsByTagName("html")[0], initHandle: function() { this.setRemHandle(); this.resizeHandle(); }, setRemHandle: function() { var clientWidth = document.documentElement.clientWidth || document.body.clientWidth; this.rootEle.style.fontSize = clientWidth * this.baseRem / this.baseWidth + "px"; }, resizeHandle: function() { var that = this; window.addEventListener("resize", function() { setTimeout(function() { that.setRemHandle(); }, 300); }); } }; rem.initHandle();</script>
    <link rel="stylesheet" href="css/base.css">
    <style>
        #wrapper{padding-bottom:2rem;}
        .header .desc li{position:relative;}
        .header .desc li:nth-of-type(1){margin:.4rem 0 .4rem;}
        .header .desc li:last-of-type{margin-bottom:.4rem;}
        .main .block{padding-right:.875rem;}
        .footer{padding:2rem 0;}
        .text{box-sizing:border-box;padding:.6rem .8rem;width:100%;height:auto;background:#fff;}
        textarea{width:100%;height:7.2rem;text-align:justify;font-size:.75rem;line-height:1.25rem;resize:none;}
        .main .block-label{position:relative;padding-right:1.8rem;}
        .block-label .language-label,.block-label .tag-label{overflow:hidden;width:8rem;text-align:right;text-overflow:ellipsis;white-space:nowrap;}
        .block-label .arrow{position:absolute;top:.875rem;left:17.45rem;width:.4rem;height:.6rem;background:url(//img2.inke.cn/MTQ5MzcwOTYwOTA2MSM0MDkjanBn.jpg) no-repeat;background-size:100% 100%;}
        .block-label-box{overflow:hidden;padding:0 .75rem;width:100%;height:0;background:#f5f8f8;}
        .block-label-box p{width:100%;height:auto;}
        .block-label-box span{display:block;width:100%;height:2rem;color:#AAA;font-size:.65rem;line-height:2rem;}
        .block-label-box i{display:inline-block;margin:0 .5rem .7rem 0;padding:.3rem .6rem;border:1px solid #CAD3D7;border-radius:100px;color:#849195;text-align:center;font-style:normal;font-size:.75rem;line-height:.75rem;}
        .block-label-box i.green{border:1px solid #00D8C9;background:#fff;color:#00D8C9;}
    </style>
</head>
<body>
    <main id="wrapper">
        <header class="header">
            <ul class="desc c1">
                <li class="block">
                    <p class="fl">昵称</p>
                    <p class="nick fr"></p>
                </li>
                <li class="block block-a">
                    <p class="fl">身高</p>
                    <p class="fr c3">请选择</p>
                    <select id="height" class="sel">
                        <option value="请选择">请选择</option>
                        <option value="保密">保密</option>
                        <option value="150cm">150cm</option>
                        <option value="151cm">151cm</option>
                        <option value="152cm">152cm</option>
                        <option value="153cm">153cm</option>
                        <option value="154cm">154cm</option>
                        <option value="155cm">155cm</option>
                        <option value="156cm">156cm</option>
                        <option value="157cm">157cm</option>
                        <option value="158cm">158cm</option>
                        <option value="159cm">159cm</option>
                        <option value="160cm">160cm</option>
                        <option value="161cm">161cm</option>
                        <option value="162cm">162cm</option>
                        <option value="163cm">163cm</option>
                        <option value="164cm">164cm</option>
                        <option value="165cm">165cm</option>
                        <option value="166cm">166cm</option>
                        <option value="167cm">167cm</option>
                        <option value="168cm">168cm</option>
                        <option value="169cm">169cm</option>
                        <option value="170cm">170cm</option>
                        <option value="171cm">171cm</option>
                        <option value="172cm">172cm</option>
                        <option value="173cm">173cm</option>
                        <option value="174cm">174cm</option>
                        <option value="175cm">175cm</option>
                        <option value="176cm">176cm</option>
                        <option value="177cm">177cm</option>
                        <option value="178cm">178cm</option>
                        <option value="179cm">179cm</option>
                        <option value="180cm">180cm</option>
                        <option value="181cm">181cm</option>
                        <option value="182cm">182cm</option>
                        <option value="183cm">183cm</option>
                        <option value="184cm">184cm</option>
                        <option value="185cm">185cm</option>
                        <option value="186cm">186cm</option>
                        <option value="187cm">187cm</option>
                        <option value="188cm">188cm</option>
                        <option value="189cm">189cm</option>
                        <option value="190cm">190cm</option>
                        <option value="191cm">191cm</option>
                        <option value="192cm">192cm</option>
                        <option value="193cm">193cm</option>
                        <option value="194cm">194cm</option>
                        <option value="195cm">195cm</option>
                        <option value="196cm">196cm</option>
                        <option value="197cm">197cm</option>
                        <option value="198cm">198cm</option>
                        <option value="199cm">199cm</option>
                        <option value="200cm">200cm</option>
                    </select>
                </li>
                <li class="block block-a">
                    <p class="fl">体重</p>
                    <p class="fr c3">请选择</p>
                    <select id="weight" class="sel">
                        <option value="请选择">请选择</option>
                        <option value="保密">保密</option>
                        <option value="40kg">40kg</option>
                        <option value="41kg">41kg</option>
                        <option value="42kg">42kg</option>
                        <option value="43kg">43kg</option>
                        <option value="44kg">44kg</option>
                        <option value="45kg">45kg</option>
                        <option value="46kg">46kg</option>
                        <option value="47kg">47kg</option>
                        <option value="48kg">48kg</option>
                        <option value="49kg">49kg</option>
                        <option value="50kg">50kg</option>
                        <option value="51kg">51kg</option>
                        <option value="52kg">52kg</option>
                        <option value="53kg">53kg</option>
                        <option value="54kg">54kg</option>
                        <option value="55kg">55kg</option>
                        <option value="56kg">56kg</option>
                        <option value="57kg">57kg</option>
                        <option value="58kg">58kg</option>
                        <option value="59kg">59kg</option>
                        <option value="60kg">60kg</option>
                        <option value="61kg">61kg</option>
                        <option value="62kg">62kg</option>
                        <option value="63kg">63kg</option>
                        <option value="64kg">64kg</option>
                        <option value="65kg">65kg</option>
                        <option value="66kg">66kg</option>
                        <option value="67kg">67kg</option>
                        <option value="68kg">68kg</option>
                        <option value="69kg">69kg</option>
                        <option value="70kg">70kg</option>
                        <option value="71kg">71kg</option>
                        <option value="72kg">72kg</option>
                        <option value="73kg">73kg</option>
                        <option value="74kg">74kg</option>
                        <option value="75kg">75kg</option>
                        <option value="76kg">76kg</option>
                        <option value="77kg">77kg</option>
                        <option value="78kg">78kg</option>
                        <option value="79kg">79kg</option>
                        <option value="80kg">80kg</option>
                        <option value="81kg">81kg</option>
                        <option value="82kg">82kg</option>
                        <option value="83kg">83kg</option>
                        <option value="84kg">84kg</option>
                        <option value="85kg">85kg</option>
                        <option value="86kg">86kg</option>
                        <option value="87kg">87kg</option>
                        <option value="88kg">88kg</option>
                        <option value="89kg">89kg</option>
                        <option value="90kg">90kg</option>
                        <option value="91kg">91kg</option>
                        <option value="92kg">92kg</option>
                        <option value="93kg">93kg</option>
                        <option value="94kg">94kg</option>
                        <option value="95kg">95kg</option>
                        <option value="96kg">96kg</option>
                        <option value="97kg">97kg</option>
                        <option value="98kg">98kg</option>
                        <option value="99kg">99kg</option>
                        <option value="100kg">100kg</option>
                    </select>
                </li>
                <li class="block block-a">
                    <p class="fl">年龄</p>
                    <p class="fr c3">请选择</p>
                    <select id="age" class="sel">
                        <option value="请选择">请选择</option>
                        <option value="保密">保密</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                        <option value="32">32</option>
                        <option value="33">33</option>
                        <option value="34">34</option>
                        <option value="35">35</option>
                        <option value="36">36</option>
                        <option value="37">37</option>
                        <option value="38">38</option>
                        <option value="39">39</option>
                        <option value="40">40</option>
                    </select>
                </li>
                <li class="block">
                    <p class="fl">性别</p>
                    <p class="sex fr"></p>
                </li>
            </ul>
        </header>
        <section class="main">
            <ul class="desc c1">


                <li class="block block-label tag">
                    <p class="fl">个人标签</p>
                    <p class="arrow"></p>
                    <p class="fr c3 tag-label">请编辑</p>
                </li>
                <li class="block-label-box tag-label-box">
                    <p class="box"></p>
                </li>


                <li class="block block-label language">
                    <p class="fl">语言能力</p>
                    <p class="arrow"></p>
                    <p class="fr c3 language-label">请编辑</p>
                </li>
                <li class="block-label-box language-label-box">
                    <p class="box"></p>
                </li>


                <li class="block">
                    <p class="fl">兴趣爱好</p>
                    <input id="favor" class="ipt fr" type="text" placeholder="如：舞蹈、音乐" maxlength="50">
                </li>
                <li class="block" style="display: none;">
                    <p class="fl">特长</p>
                    <input id="speciality" class="ipt fr" type="text" placeholder="编辑个人特长 如：舞蹈、钢琴" maxlength="50">
                </li>
                <li class="block" style="display: none;">
                    <p class="fl">沟通特点</p>
                    <input id="trait" class="ipt fr" type="text" placeholder="编辑个人沟通特点 如：逗逼、亲切" maxlength="50">
                </li>
                <li class="block" style="display: none;">
                    <p class="fl">个人IP</p>
                    <input id="iperson" class="ipt fr" type="text" placeholder="编辑个人IP 如：R&B、二次元" maxlength="50">
                </li>
            </ul>
            <p class="title">个人经历</p>
            <div class="text">
                <textarea id="workinfo" placeholder="请描述个人演艺及商务活动等经历，限300字以内" maxlength="300"></textarea>
            </div>
        </section>
    </main>

    <!--loading-->
    <section id="loading"><p><span></span></p></section>
    <!--loading结束-->
</body>
<div style="display:none;"><script src="https://s95.cnzz.com/z_stat.php?id=1261919673&web_id=1261919673" language="JavaScript"></script></div>
    <script src="https://act.inke.cn/common/zepto.min.js"></script>
    <script src="js/common-s.js"></script>
    <script src="js/base.js"></script>
    <script>
        var Page = {
            btn_f: $(".btn-f"),
            nick: $(".nick"),
            sex: $(".sex"),
            height: $("#height"),
            weight: $("#weight"),
            age: $("#age"),
            language: $(".language"),
            language_label: $(".language-label"),
            language_label_box: $(".language-label-box"),
            language_label_box_p: $(".language-label-box p"),
            favor: $("#favor"),
            tag: $(".tag"),
            tag_label: $(".tag-label"),
            tag_label_box: $(".tag-label-box"),
            tag_label_box_p: $(".tag-label-box p"),
            speciality: $("#speciality"),
            trait: $("#trait"),
            iperson: $("#iperson"),
            workinfo: $("#workinfo"),
            init: function () {
                var that = this,
                    $this = null;
                if (Base.uid && Base.sid) {
                    that.bindEvent();
                    that.initData();
                } else {

                }
            },
            bindEvent: function () {
                var that = this,
                    $this = null,
                    _index = 0;
                Base.selFun();

                function animate($this, height) {
                    if (!$this.hasClass("block-label-show")) {
                        $this.find(".arrow").animate({
                            transform: "rotate(90deg)"
                        }, 300);

                        $this.next().animate({
                            height: height + "px"
                        }, 300, function () {
                            $this.addClass("block-label-show");
                        });
                    } else {
                        $this.find(".arrow").animate({
                            transform: "rotate(0deg)"
                        }, 300);

                        $this.next().animate({
                            height: 0
                        }, 300, function () {
                            $this.removeClass("block-label-show");
                        });
                    }
                }

                that.tag.on("click", function () {
                    $this = $(this);
                    animate($this, that.tag_label_box_height);
                });


                that.language.on("click", function () {
                    $this = $(this);
                    animate($this, that.language_label_box_height);
                });

                function add1() {
                    for (var key in that.obj1) {
                        that.html1 += that.obj1[key] + "、"
                    }
                    if (that.html1) {
                        that.tag_label.html(that.html1.replace(/、$/g, "")).removeClass("c3").addClass("c1");
                    } else {
                        that.tag_label.html("请编辑").removeClass("c1").addClass("c3");
                    }
                }

                Base.wrapper.on("click", ".tag-text", function () {
                    $this = $(this);
                    _index = $this.index() - 1;
                    that.html1 = "";
                    if ($this.hasClass("green") && Object.keys(that.obj1).length <= 3) {
                        $this.removeClass("green").attr("data-on", 0);
                        delete that.obj1[_index];
                        add1();
                    } else if (!$this.hasClass("green") && Object.keys(that.obj1).length <= 2) {
                        $this.addClass("green").attr("data-on", 1);
                        that.obj1[_index] = $this.html();
                        add1();
                    }
                });

                function add2() {
                    for (var key in that.obj2) {
                        that.html2 += that.obj2[key] + "、"
                    }
                    if (that.html2) {
                        that.language_label.html(that.html2.replace(/、$/g, "")).removeClass("c3").addClass("c1");
                    } else {
                        that.language_label.html("请编辑").removeClass("c1").addClass("c3");
                    }
                }

                Base.wrapper.on("click", ".language-text", function () {
                    $this = $(this);
                    _index = $this.index() - 1;
                    that.html2 = "";
                    if ($this.hasClass("green") && Object.keys(that.obj2).length <= 3) {
                        $this.removeClass("green").attr("data-on", 0);
                        delete that.obj2[_index];
                        add2();
                    } else if (!$this.hasClass("green") && Object.keys(that.obj2).length <= 2) {
                        $this.addClass("green").attr("data-on", 1);
                        that.obj2[_index] = $this.html();
                        add2();
                    }
                });
            },
            flg1: 0,
            flg2: 0,
            tag_label_box_height: 0,
            tag_obj: [],
            language_label_box_height: 0,
            language_obj: [],
            obj1: {},
            html1: "",
            obj2: {},
            html2: "",
            // 查询主播个人信息
            initData: function () {
                var that = this,
                    _time = new Date() * 1;
                Base.loading.show();

                function loading() {
                    if (that.flg1 && that.flg2) {
                        Base.loading.hide();
                    }
                }

                // 主播信息
                Common.ajax({
                    host: Base.apiHost(),
                    url: "/app/insert_user_info",
                    data: {
                        v: "201706",
                        type: 1
                    },
                    success: function (res) {
                        that.flg1 = 1;
                        loading();
                        console.log("查询主播个人信息：", res);
                        var data = res.data,
                            dm_error = res.dm_error,
                            error_msg = res.error_msg;
                        _czc && _czc.push(["_trackEvent", "economy2_myself2", "ajax", "initData_" + dm_error, (new Date() * 1 - _time)]);

                        if (dm_error === 0) {
                            if (data) {
                                for (var k in data) {
                                    that[k] && (that[k][0].tagName === "INPUT" || "TEXTAREA") && that[k].val(data[k]);
                                }
                                that.height.val(LocalData.setSelect(data.height, "cm"));
                                that.height.prev().html(LocalData.setSelect(data.height, "cm"));
                                if (data.height !== "") {
                                    that.height.prev().removeClass("c3");
                                }
                                that.weight.val(LocalData.setSelect(data.weight, "kg"));
                                that.weight.prev().html(LocalData.setSelect(data.weight, "kg"));
                                if (data.weight !== "") {
                                    that.weight.prev().removeClass("c3");
                                }
                                that.age.val(LocalData.setSelect(data.age));
                                that.age.prev().html(LocalData.setSelect(data.age));
                                if (data.age !== "") {
                                    that.age.prev().removeClass("c3");
                                }
                                if (data.status === 0 || data.status === 3) {
                                    Base.disabled();
                                    that.btn_f.off("click").removeClass("btn-t");
                                } else {
                                    Common.rightButton.initRightButton({
                                        text: "完成",
                                        callback: function () {
                                            that.saveUserInfo();
                                        }
                                    });
                                }

                                // fanjiaojiao code

                                var _tag = data.tag,
                                    _tag_html = "",
                                    _tag_box_html = "<span>所有标签</span>",
                                    _language = data.language,
                                    _language_html = "",
                                    _language_box_html = "<span>所有标签</span>";

                                that.tag_obj = _tag;
                                that.language_obj = _language;

                                // 个人标签
                                for (var i = 0; i < _tag.length; i++) {
                                    if (_tag[i].on) {
                                        _tag_box_html += "<i class=\"tag-text green\" data-sid=\"" + _tag[i].sid + "\" data-on=\"" + _tag[i].on + "\">" + _tag[i].name + "</i>";
                                        _tag_html += _tag[i].name + "、";
                                        that.obj1[i] = _tag[i].name;
                                    } else {
                                        _tag_box_html += "<i class=\"tag-text\" data-sid=\"" + _tag[i].sid + "\" data-on=\"" + _tag[i].on + "\">" + _tag[i].name + "</i>";
                                    }
                                }
                                if (_tag_html) {
                                    that.tag_label.html(_tag_html.replace(/、$/g, "")).removeClass("c3").addClass("c1");
                                    that.html1 = _tag_html.replace(/、$/g, "");
                                }
                                that.tag_label_box_p.html(_tag_box_html);
                                that.tag_label_box_height = that.tag_label_box_p.height();

                                // 语言能力
                                for (var j = 0; j < _language.length; j++) {
                                    if (_language[j].on) {
                                        _language_box_html += "<i class=\"language-text green\" data-sid=\"" + _language[j].sid + "\" data-on=\"" + _language[j].on + "\">" + _language[j].name + "</i>";
                                        _language_html += _language[j].name + "、";
                                        that.obj2[j] = _language[j].name;
                                    } else {
                                        _language_box_html += "<i class=\"language-text\" data-sid=\"" + _language[j].sid + "\" data-on=\"" + _language[j].on + "\">" + _language[j].name + "</i>";
                                    }
                                }
                                if (_language_html) {
                                    that.language_label.html(_language_html.replace(/、$/g, "")).removeClass("c3").addClass("c1");
                                    that.html2 = _language_html.replace(/、$/g, "");
                                }
                                that.language_label_box_p.html(_language_box_html);
                                that.language_label_box_height = that.language_label_box_p.height();

                            } else {
                                Common.rightButton.initRightButton({
                                    text: "完成",
                                    callback: function () {
                                        that.saveUserInfo();
                                    }
                                });
                            }
                        } else if (dm_error === 1099010012) {
                            Base.alertShow("登录已过期，请在<br/>设置中退出并重新登录");
                        } else if (dm_error === 1099010015) {
                            Base.alertShow(error_msg);
                        } else {
                            Base.alertShow(error_msg);
                        }
                    },
                    error: function () {
                        _czc && _czc.push(["_trackEvent", "economy2_myself2", "ajax", "initData_error", (new Date() * 1 - _time)]);
                        Base.loading.hide();
                        Base.alertShow("网络错误，请退出重试");
                    }
                });

                // 个人信息
                Common.ajax({
                    host: Base.apiHost(),
                    url: "/app/user_info",
                    success: function (res) {
                        that.flg2 = 1;
                        loading();
                        var data = res.data,
                            dm_error = res.dm_error,
                            error_msg = res.error_msg;
                        _czc && _czc.push(["_trackEvent", "economy2_myself2", "ajax", "initInfo_" + dm_error, (new Date() * 1 - _time)]);
                        if (dm_error === 0) {
                            that.nick.html(data.user_nick);
                            that.sex.html(data.sex === 1 ? "男" : "女").attr("data-sex", data.sex);
                        } else if (dm_error === 1099010012) {
                            Base.alertShow("登录已过期，请在<br/>设置中退出并重新登录");
                        } else {
                            Base.alertShow(error_msg);
                        }
                    },
                    error: function () {
                        _czc && _czc.push(["_trackEvent", "economy2_myself2", "ajax", "initInfo_error", (new Date() * 1 - _time)]);
                        Base.loading.hide();
                        Base.alertShow("网络错误，请退出重试");
                    }
                });
            },
            // 存储主播个人信息
            saveUserInfo: function () {
                var that = this,
                    _time = new Date() * 1,
                    _height = LocalData.getSelect(that.height.val()),
                    _weight = LocalData.getSelect(that.weight.val()),
                    _age = LocalData.getSelect(that.age.val()),
                    _sex = that.sex.attr("data-sex"),
//                    _language = that.language.val().trim(),
                    _favor = that.favor.val().trim(),
//                    _tag = that.tag.val().trim(),
                    _speciality = that.speciality.val().trim(),
                    _trait = that.trait.val().trim(),
                    _iperson = that.iperson.val().trim(),
                    _workinfo = that.workinfo.val().trim(),
                    $tag_text = $(".tag-text"),
                    _tag_data = {},
                    $language_text = $(".language-text"),
                    _language_data = {};

                for (var i = 0; i < $tag_text.length; i++) {
                    _tag_data[$tag_text.eq(i).attr("data-sid")] = $tag_text.eq(i).attr("data-on")
                }

                for (var j = 0; j < $language_text.length; j++) {
                    _language_data[$language_text.eq(j).attr("data-sid")] = $language_text.eq(j).attr("data-on")
                }


                if (!that.html1) {
                    Base.alertShow("请编辑个人标签");
                    return;
                }

                if (!that.html2) {
                    Base.alertShow("请编辑语言能力");
                    return;
                }

                Base.loading.show();
                Common.ajax({
                    host: Base.apiHost(),
                    url: "/app/insert_user_info",
                    data: {
                        v: "201706",
                        type: 2,
                        height: _height,
                        weight: _weight,
                        age: _age,
                        sex: _sex,
                        language: JSON.stringify(_language_data),
                        favor: _favor,
                        tag: JSON.stringify(_tag_data),
                        speciality: _speciality,
                        trait: _trait,
                        iperson: _iperson,
                        workinfo: _workinfo
                    },
                    success: function (res) {
                        Base.loading.hide();
                        // console.log("存储主播个人信息：", res);
                        var data = res.data,
                            dm_error = res.dm_error,
                            error_msg = res.error_msg;
                        _czc && _czc.push(["_trackEvent", "economy2_myself2", "ajax", "saveUserInfo_" + dm_error, (new Date() * 1 - _time)]);

                        if (dm_error === 0) {
                            Base.confirm("请到完善资料页提交申请信息", function () {
                                window.setTimeout(function () {
                                    Base.jumpHref("data2.html");
                                }, 300);
                            });
                        } else if (dm_error === 1099010012) {
                            Base.alertShow("登录已过期，请在<br/>设置中退出并重新登录");
                        } else if (dm_error === 1099010015) {
                            Base.alertShow(error_msg);
                        } else {
                            Base.alertShow(error_msg);
                        }
                    },
                    error: function () {
                        _czc && _czc.push(["_trackEvent", "economy2_myself2", "ajax", "saveUserInfo_error", (new Date() * 1 - _time)]);
                        Base.loading.hide();
                        Base.alertShow("网络错误，请退出重试");
                    }
                });
            },
            log: function (click_id, callback) {  //  埋点
                Common.log({
                    busi_code: "economy2",
                    page_code: "myself2",
                    other: {
                        click_id: click_id
                    },
                    callback: callback
                });
            }
        };

        $(function () {
            Page.init();
        });

    </script>
</html>